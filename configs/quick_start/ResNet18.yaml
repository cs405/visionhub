# ptcls quick start config (visionhub-like)

Global:
  checkpoints: null
  pretrained_model: null
  output_dir: ./output/
  device: gpu
  save_interval: 1
  eval_during_train: True
  eval_interval: 1
  epochs: 1
  print_batch_step: 10
  use_visualdl: False
  image_shape: [3, 224, 224]
  save_inference_dir: ./visionhub/output

Arch:
  Backbone:
    name: ResNet18
    class_num: 1000

Loss:
  Train:
    - CELoss:
        weight: 1.0
  Eval:
    - CELoss:
        weight: 1.0

Optimizer:
  name: Momentum
  momentum: 0.9
  lr:
    name: Cosine
    learning_rate: 0.01
    warmup_epoch: 0
    by_epoch: false
  weight_decay: 0.0001

# NOTE: 当前 ptcls 的 build_dataloader 读取 Train/Eval 顶层键（非 visionhub 的 DataLoader:Train/Eval）。
# 为了兼容现有实现，这里仍使用 Train/Eval 顶层。
Train:
  dataset:
    name: ImageNetDataset
    image_root: ./dataset/flowers102/
    cls_label_path: ./dataset/flowers102/train_list.txt
    transform_ops:
      - DecodeImage:
          to_rgb: True
          channel_first: False
      - ResizeImage:
          resize_short: 256
      - CropImage:
          size: 224
      - NormalizeImage:
          scale: 1.0/255.0
          mean: [0.485, 0.456, 0.406]
          std: [0.229, 0.224, 0.225]
          order: 'chw'
      - ToTensor:
  sampler:
    batch_size: 8
    drop_last: False
    shuffle: True
  loader:
    num_workers: 0

Eval:
  dataset:
    name: ImageNetDataset
    image_root: ./dataset/flowers102/
    cls_label_path: ./dataset/flowers102/val_list.txt
    transform_ops:
      - DecodeImage:
          to_rgb: True
          channel_first: False
      - ResizeImage:
          resize_short: 256
      - CropImage:
          size: 224
      - NormalizeImage:
          scale: 1.0/255.0
          mean: [0.485, 0.456, 0.406]
          std: [0.229, 0.224, 0.225]
          order: 'chw'
      - ToTensor:
  sampler:
    batch_size: 8
    drop_last: False
    shuffle: False
  loader:
    num_workers: 0

Metric:
  Train:
    - TopkAcc:
        topk: [1, 5]
  Eval:
    - TopkAcc:
        topk: [1, 5]

